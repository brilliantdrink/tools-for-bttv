"use strict";(()=>{var ze=Object.create;var le=Object.defineProperty;var Ve=Object.getOwnPropertyDescriptor;var Oe=Object.getOwnPropertyNames;var Ge=Object.getPrototypeOf,Re=Object.prototype.hasOwnProperty;var ce=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var qe=(e,t,n,a)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of Oe(t))!Re.call(e,o)&&o!==n&&le(e,o,{get:()=>t[o],enumerable:!(a=Ve(t,o))||a.enumerable});return e};var U=(e,t,n)=>(n=e!=null?ze(Ge(e)):{},qe(t||!e||!e.__esModule?le(n,"default",{value:e,enumerable:!0}):n,e));var Y=ce(b=>{"use strict";Object.defineProperty(b,"__esModule",{value:!0});b.TokenData=void 0;b.parse=X;b.compile=Ze;b.match=Je;b.pathToRegexp=ye;b.stringify=Qe;var Z="/",W=e=>e,be=/^[$_\p{ID_Start}]$/u,J=/^[$\u200c\u200d\p{ID_Continue}]$/u,R="https://git.new/pathToRegexpError",Ue={"{":"{","}":"}","(":"(",")":")","[":"[","]":"]","+":"+","?":"?","!":"!"};function je(e){return e.replace(/[{}()\[\]+?!:*]/g,"\\$&")}function g(e){return e.replace(/[.+*?^${}()[\]|/\\]/g,"\\$&")}function*Ke(e){let t=[...e],n=0;function a(){let o="";if(be.test(t[++n]))for(o+=t[n];J.test(t[++n]);)o+=t[n];else if(t[n]==='"'){let r=n;for(;n<t.length;){if(t[++n]==='"'){n++,r=0;break}t[n]==="\\"?o+=t[++n]:o+=t[n]}if(r)throw new TypeError(`Unterminated quote at ${r}: ${R}`)}if(!o)throw new TypeError(`Missing parameter name at ${n}: ${R}`);return o}for(;n<t.length;){let o=t[n],r=Ue[o];if(r)yield{type:r,index:n++,value:o};else if(o==="\\")yield{type:"ESCAPED",index:n++,value:t[n++]};else if(o===":"){let s=a();yield{type:"PARAM",index:n,value:s}}else if(o==="*"){let s=a();yield{type:"WILDCARD",index:n,value:s}}else yield{type:"CHAR",index:n,value:t[n++]}}return{type:"END",index:n,value:""}}var K=class{constructor(t){this.tokens=t}peek(){if(!this._peek){let t=this.tokens.next();this._peek=t.value}return this._peek}tryConsume(t){let n=this.peek();if(n.type===t)return this._peek=void 0,n.value}consume(t){let n=this.tryConsume(t);if(n!==void 0)return n;let{type:a,index:o}=this.peek();throw new TypeError(`Unexpected ${a} at ${o}, expected ${t}: ${R}`)}text(){let t="",n;for(;n=this.tryConsume("CHAR")||this.tryConsume("ESCAPED");)t+=n;return t}},M=class{constructor(t){this.tokens=t}};b.TokenData=M;function X(e,t={}){let{encodePath:n=W}=t,a=new K(Ke(e));function o(s){let i=[];for(;;){let c=a.text();c&&i.push({type:"text",value:n(c)});let m=a.tryConsume("PARAM");if(m){i.push({type:"param",name:m});continue}let u=a.tryConsume("WILDCARD");if(u){i.push({type:"wildcard",name:u});continue}if(a.tryConsume("{")){i.push({type:"group",tokens:o("}")});continue}return a.consume(s),i}}let r=o("END");return new M(r)}function Ze(e,t={}){let{encode:n=encodeURIComponent,delimiter:a=Z}=t,o=e instanceof M?e:X(e,t),r=Te(o.tokens,a,n);return function(i={}){let[c,...m]=r(i);if(m.length)throw new TypeError(`Missing parameters: ${m.join(", ")}`);return c}}function Te(e,t,n){let a=e.map(o=>We(o,t,n));return o=>{let r=[""];for(let s of a){let[i,...c]=s(o);r[0]+=i,r.push(...c)}return r}}function We(e,t,n){if(e.type==="text")return()=>[e.value];if(e.type==="group"){let o=Te(e.tokens,t,n);return r=>{let[s,...i]=o(r);return i.length?[""]:[s]}}let a=n||W;return e.type==="wildcard"&&n!==!1?o=>{let r=o[e.name];if(r==null)return["",e.name];if(!Array.isArray(r)||r.length===0)throw new TypeError(`Expected "${e.name}" to be a non-empty array`);return[r.map((s,i)=>{if(typeof s!="string")throw new TypeError(`Expected "${e.name}/${i}" to be a string`);return a(s)}).join(t)]}:o=>{let r=o[e.name];if(r==null)return["",e.name];if(typeof r!="string")throw new TypeError(`Expected "${e.name}" to be a string`);return[a(r)]}}function Je(e,t={}){let{decode:n=decodeURIComponent,delimiter:a=Z}=t,{regexp:o,keys:r}=ye(e,t),s=r.map(i=>n===!1?W:i.type==="param"?n:c=>c.split(a).map(n));return function(c){let m=o.exec(c);if(!m)return!1;let u=m[0],f=Object.create(null);for(let p=1;p<m.length;p++){if(m[p]===void 0)continue;let d=r[p-1],v=s[p-1];f[d.name]=v(m[p])}return{path:u,params:f}}}function ye(e,t={}){let{delimiter:n=Z,end:a=!0,sensitive:o=!1,trailing:r=!0}=t,s=[],i=[],c=o?"":"i",u=(Array.isArray(e)?e:[e]).map(d=>d instanceof M?d:X(d,t));for(let{tokens:d}of u)for(let v of G(d,0,[])){let T=Xe(v,n,s);i.push(T)}let f=`^(?:${i.join("|")})`;return r&&(f+=`(?:${g(n)}$)?`),f+=a?"$":`(?=${g(n)}|$)`,{regexp:new RegExp(f,c),keys:s}}function*G(e,t,n){if(t===e.length)return yield n;let a=e[t];if(a.type==="group"){let o=n.slice();for(let r of G(a.tokens,0,o))yield*G(e,t+1,r)}else n.push(a);yield*G(e,t+1,n)}function Xe(e,t,n){let a="",o="",r=!0;for(let s=0;s<e.length;s++){let i=e[s];if(i.type==="text"){a+=g(i.value),o+=i.value,r||(r=i.value.includes(t));continue}if(i.type==="param"||i.type==="wildcard"){if(!r&&!o)throw new TypeError(`Missing text after "${i.name}": ${R}`);i.type==="param"?a+=`(${Ye(t,r?"":o)}+)`:a+="([\\s\\S]+)",n.push(i),o="",r=!1;continue}}return a}function Ye(e,t){return t.length<2?e.length<2?`[^${g(e+t)}]`:`(?:(?!${g(e)})[^${g(t)}])`:e.length<2?`(?:(?!${g(t)})[^${g(e)}])`:`(?:(?!${g(t)}|${g(e)})[\\s\\S])`}function Qe(e){return e.tokens.map(function t(n,a,o){if(n.type==="text")return je(n.value);if(n.type==="group")return`{${n.tokens.map(t).join("")}}`;let s=et(n.name)&&tt(o[a+1])?n.name:JSON.stringify(n.name);if(n.type==="param")return`:${s}`;if(n.type==="wildcard")return`*${s}`;throw new TypeError(`Unexpected token: ${n}`)}).join("")}function et(e){let[t,...n]=e;return be.test(t)?n.every(a=>J.test(a)):!1}function tt(e){return e?.type!=="text"?!0:!J.test(e.value[0])}});var Se=ce(te=>{function mt(e){var t=e.slice(0);return t.sort(function(n,a){return n-a}),t.length%2===0?(t[t.length/2-1]+t[t.length/2])/2:t[Math.floor(t.length/2)]}function Pe(e,t){for(var n=t*256*3/2,a=e.length/4,o=0;o<4;o++)for(var r=mt(e.slice(o*a,(o+1)*a)),s=o*a;s<(o+1)*a;s++){var i=e[s];e[s]=+(i>r||Math.abs(i-r)<1&&r>n)}}function $e(e){for(var t=[],n=0;n<e.length;n+=4){var a=e.slice(n,n+4);t.push(parseInt(a.join(""),2).toString(16))}return t.join("")}function Ae(e,t){for(var n=Math.floor(e.width/t),a=Math.floor(e.height/t),o=[],r=0;r<t;r++)for(var s=0;s<t;s++){for(var i=0,c=0;c<a;c++)for(var m=0;m<n;m++){var u=s*n+m,f=r*a+c,p=(f*e.width+u)*4,d=e.data[p+3];i+=d===0?765:e.data[p]+e.data[p+1]+e.data[p+2]}o.push(i)}return Pe(o,n*a),$e(o)}function pt(e,t){var n=[],a,o,r,s,i,c,m,u,f,p,d,v,T,N,B,k,oe,I,_,ae,y=[],se=e.width%t===0,ie=e.height%t===0;if(se&&ie)return Ae(e,t);for(a=0;a<t;a++)for(y.push([]),o=0;o<t;o++)y[a].push(0);for(i=e.width/t,c=e.height/t,s=0;s<e.height;s++)for(ie?(d=v=Math.floor(s/c),m=1,u=0):(B=(s+1)%c,k=B-Math.floor(B),oe=B-k,m=1-k,u=k,oe>0||s+1===e.height?d=v=Math.floor(s/c):(d=Math.floor(s/c),v=Math.ceil(s/c))),r=0;r<e.width;r++){var F=(s*e.width+r)*4,Fe=e.data[F+3],z=Fe===0?765:e.data[F]+e.data[F+1]+e.data[F+2];se?(T=N=Math.floor(r/i),f=1,p=0):(I=(r+1)%i,_=I-Math.floor(I),ae=I-_,f=1-_,p=_,ae>0||r+1===e.width?T=N=Math.floor(r/i):(T=Math.floor(r/i),N=Math.ceil(r/i))),y[d][T]+=z*m*f,y[d][N]+=z*m*p,y[v][T]+=z*u*f,y[v][N]+=z*u*p}for(a=0;a<t;a++)for(o=0;o<t;o++)n.push(y[a][o]);return Pe(n,i*c),$e(n)}te.bmvbhashEven=Ae;te.bmvbhash=pt});var w="bttv-ffz-helper";var H="betterttv.com",C="cdn.betterttv.net",me="www.frankerfacez.com",D="Tools for BTTV",V=e=>`https://cdn.betterttv.net/emote/${e}/3x.webp`,pe=e=>`https://betterttv.com/emotes/${e}`,O=(e,t)=>`https://cdn.frankerfacez.com/emoticon/${e}/${t?"animated/":""}2`,ue=(e,t)=>`https://www.frankerfacez.com/emoticon/${e}-${t}`,P=e=>{let t={id:e.id,code:e.code};return e.animated&&(t.animated=!0),t};function E(e){return new Promise(t=>{if(document.querySelector(e))return t(document.querySelector(e));let n=new MutationObserver(a=>{document.querySelector(e)&&(n.disconnect(),t(document.querySelector(e)))});n.observe(document.body,{childList:!0,subtree:!0})})}function l(e,t,n){let a=["svg","path"].includes(e),o=a?document?.createElementNS("http://www.w3.org/2000/svg",e):document?.createElement(e);for(let r in t)t.hasOwnProperty(r)&&(r==="innerText"?o.innerText=t[r]:r==="innerHTML"?o.innerHTML=t[r]:r==="children"?Array.isArray(t[r])||t[r]instanceof NodeList||t[r]instanceof HTMLCollection?t[r].forEach(s=>o.appendChild(s)):(t[r]instanceof Node||t[r]instanceof Element)&&o.appendChild(t[r]):r==="className"?o.classList.add(...t[r].split(" ")):a?o.setAttributeNS(null,r,t[r]):o.setAttribute(r,t[r]));return n&&n.appendChild(o),o}async function fe(e){let t=await fetch(`https://api.frankerfacez.com/v1/user/${e.toLowerCase()}`).then(a=>a.json());return(await fetch(`https://api.betterttv.net/3/cached/frankerfacez/users/twitch/${t.user.twitch_id}`).then(a=>a.json())).map(P)}async function de(e){let t={headers:{Authorization:`Bearer ${localStorage.getItem("USER_TOKEN")?.replaceAll('"',"")}`}},n=await fetch("https://api.betterttv.net/3/account",t).then(r=>r.json()),a;if(e.toLowerCase()===n.name?a=n.providerId:a=(await fetch("https://api.betterttv.net/3/account/dashboards",t).then(s=>s.json())).find(s=>e.toLowerCase()===s.name)?.providerId,!a)throw new Error("Found invalid user");let o=await fetch(`https://api.betterttv.net/3/cached/users/twitch/${a}`).then(r=>r.json());return o.channelEmotes.concat(o.sharedEmotes).map(P)}async function he(e){return(await fetch("https://api.betterttv.net/3/cached/emotes/global").then(n=>n.json())).map(P)}function ge(e,t){if(!e||!t)return 99;for(var n=e.length,a=t.length,o=new Array,r=0;r<=n;r++)o[r]=new Array,o[r][0]=r;for(var s=0;s<=a;s++)o[0][s]=s;for(var i=0,s=1;s<=a;s++)for(var r=1;r<=n;r++)i=e.charAt(r-1)==t.charAt(s-1)?0:1,o[r][s]=Math.min(o[r][s-1]+1,Math.min(o[r-1][s]+1,o[r-1][s-1]+i)),r>1&&s>1&&e.charAt(r-1)==t.charAt(s-2)&&e.charAt(r-2)==t.charAt(s-1)&&(o[r][s]=Math.min(o[r][s],o[r-2][s-2]+i));return o[n][a]}var $=class{_bttvEmotes;_bttvGlobalEmotes;_ffzEmotes;_ffzGlobalEmotes;overlapping;overlappingHTML;likelyDuplicates;likelyDuplicatesHTML;perceptualDuplicates;perceptualDuplicatesHTML;constructor(){this._bttvEmotes=[],this._bttvGlobalEmotes=[],this._ffzEmotes=[],this._ffzGlobalEmotes=[],this.overlapping=[],this.overlappingHTML=l("div",{className:"tfb-emotes-pair-container"}),this.likelyDuplicates=[],this.likelyDuplicatesHTML=l("div",{className:"tfb-emotes-pair-container"}),this.perceptualDuplicates=[],this.perceptualDuplicatesHTML=l("div",{className:"tfb-emotes-pair-container"})}get allEmotes(){return[...this.bttvEmotes,...this.bttvGlobalEmotes,...this.ffzEmotes,...this.ffzGlobalEmotes]}get bttvEmotes(){return this._bttvEmotes}set bttvEmotes(t){this._bttvEmotes=t.map(n=>(n.provider="BTTV",n)),this.updateDuplicates()}get bttvGlobalEmotes(){return this._bttvGlobalEmotes}set bttvGlobalEmotes(t){this._bttvGlobalEmotes=t.map(n=>(n.provider="BTTV",n.global=!0,n)),this.updateDuplicates()}get ffzEmotes(){return this._ffzEmotes}set ffzEmotes(t){this._ffzEmotes=t.map(n=>(n.provider="FFZ",n)),this.updateDuplicates()}get ffzGlobalEmotes(){return this._ffzGlobalEmotes}set ffzGlobalEmotes(t){this._ffzGlobalEmotes=t.map(n=>(n.provider="FFZ",n.global=!0,n)),this.updateDuplicates()}updateEmotes(t){return Promise.allSettled([fe(t).then(n=>this.ffzEmotes=n),de(t).then(n=>this.bttvEmotes=n),he(t).then(n=>this.bttvGlobalEmotes=n)])}updateDuplicates(){this.overlapping=[],this.likelyDuplicates=[];let t=this.allEmotes;for(let n=0;n<t.length;n++){let a=t[n];for(let o=n+1;o<t.length;o++){let r=t[o];a.code===r.code?this.overlapping.push([a,r]):a.code.toLowerCase()===r.code.toLowerCase()&&this.likelyDuplicates.push([a,r])}}this.overlappingHTML.innerHTML="-",this.overlappingHTML.innerHTML="";for(let n of this.overlapping)j(n,this.overlappingHTML);this.likelyDuplicatesHTML.innerHTML="-",this.likelyDuplicatesHTML.innerHTML="";for(let n of this.likelyDuplicates)j(n,this.likelyDuplicatesHTML)}async updatePerceptualDuplicates(t){let n=0;this.perceptualDuplicates=[];let a=this.allEmotes;for(let o=0;o<a.length;o++){let r=a[o],s=ve(r);for(let i=o+1;i<a.length;i++){let c=a[i],m=await ve(c),u=await s;ge(u,m)<=1&&this.perceptualDuplicates.push([r,c]),t(++n)}}this.perceptualDuplicatesHTML.innerHTML="-",this.perceptualDuplicatesHTML.innerHTML="";for(let o of this.perceptualDuplicates)o[0].global&&o[1].global||j(o,this.perceptualDuplicatesHTML)}findExact(t){return this.allEmotes.filter(n=>n.code===t)}findNotExact(t){return this.allEmotes.filter(n=>n.code!==t&&n.code.toLowerCase()===t.toLowerCase())}},h=new $,Ee=new Map;window.onmessage=e=>{window.top&&e.data.type==="phash"&&Ee.get(e.data.id)?.(e.data.phash)};var A=document.createElement("iframe");A.src="https://"+C;A.style.visibility="hidden";A.style.pointerEvents="none";document.body.appendChild(A);function ve(e){return new Promise(t=>{Ee.set(e.id,t),A.contentWindow?.postMessage({type:"emote",emote:e,id:e.id},"https://"+C)})}function j(e,t){return l("div",{className:"tfb-emotes-container",children:e.map(x)},t)}function x(e){let t,n;return e.provider==="BTTV"?(t=pe(e.id),n=V(e.id)):e.provider==="FFZ"&&(t=ue(e.id,e.code),n=O(e.id,e.animated)),l("a",{className:"tfb-emote-wrapper",href:t,children:[l("img",{className:"tfb-emote-image",src:n}),l("span",{className:"tfb-emote-name",innerText:e.code}),l("div",{className:"tfb-emote-provider-wrapper",children:[l("div",{className:["tfb-emote-provider",e.provider.toLowerCase()].join(" ")}),e.global&&l("span",{innerText:"(Global)"})].filter(a=>a)})]})}function L(e,t,n,a){let o=l("details",{className:"tfb-details"},n);a&&o.setAttribute("open",!0);let r=l("span",{innerText:" (Loading)"},n),s=l("summary",{className:"tfb-heading",innerText:e,children:r},o);return o.appendChild(t),new MutationObserver(()=>r.innerText=` (${t.childElementCount})`).observe(t,{childList:!0}),o}var De=U(Y(),1),we="dashboard/emotes/channel",nt=(0,De.match)("/emotes/:id"),rt=["popular","trending","shared","global"],xe=e=>{let t=nt(e);return t?!rt.includes(t?.params?.id):!1};async function Le(){let e=null,t=await S();async function n(){let o=location.pathname,r=await S();o.includes(we)?!e||!e.includes(we)?(Q(),ot()):t!==r&&h.updateEmotes(await S()):xe(o)?(!e||!xe(e))&&(Q(),at()):Q(),e=o,t=r}n(),new MutationObserver(n).observe(document.body,{childList:!0,subtree:!0})}async function S(){return(await E("[id*=menu-button]:has(img)")).innerText.trim().toLowerCase()}async function ot(){let e=await E('.chakra-tabs:has([role="tablist"])'),t=l("div",{className:"tfb-bttv",id:w},e);l("p",{className:"tfb-title",innerText:D},t),L("Overlapping emote names",h.overlappingHTML,t),L("Likely duplicates",h.likelyDuplicatesHTML,t),h.updateEmotes(await S())}async function at(){let e=await E("[class*=_panel]"),t=l("div",{className:"tfb-Emote_row"});e.replaceWith(t),e.style.flexGrow="1",e.style.display="flex",e.style.flexDirection="column";let n=e.querySelector("[class*=_section] > p")?.innerText.trim(),a=e.querySelector("[class*=_section]")?.classList.toString(),o=Array.from(e.querySelector("[class*=_section]")?.classList??[]).find(m=>m.includes("_section")),r=l("div",{className:`tfb-emotes-list chakra-stack ${o}`}),s=l("div",{className:`tfb-bttv ${e.classList.toString()}`,children:[l("div",{className:a,children:l("p",{className:"chakra-text css-0",innerText:D})}),l("hr",{className:"chakra-divider"}),r]},t);t.append(e),await h.updateEmotes(await S());let i=h.findExact(n??"");i.length>0&&(l("p",{className:"tfb-heading",innerText:"Would overlap with"},r),i.forEach(m=>{r.append(x(m))}));let c=h.findNotExact(n??"");c.length>0&&(l("p",{className:"tfb-heading",innerText:"Likely duplicates"},r),c.forEach(m=>{r.append(x(m))})),i.length+c.length===0&&l("p",{innerText:`This emote doesn't overlap
with any in your library.`},r)}function Q(){document.querySelector(`#${w}`)?.remove()}var He=U(Y(),1),Me="/channel",st=(0,He.match)("/emoticon/:id"),Ne=e=>!!st(e);async function Ce(){let e=null;async function t(){let a=location.pathname;a.includes(Me)?(!e||!e.includes(Me))&&(ee(),lt()):Ne(a)?(!e||!Ne(e))&&(ee(),ct()):ee(),e=a}t(),new MutationObserver(t).observe(document.body,{childList:!0,subtree:!0})}async function it(){return(await E("#channel")).childNodes.item(0).wholeText.trim()}async function lt(){let e=await E(".col-lg-12");e.classList.remove("col-lg-12"),e.classList.add("col-sm-9");let t=l("div",{className:"col-sm-3 sidebar sidebar-offcanvas",id:"sidebar"},e.parentElement),n=l("div",{className:"panel panel-default tfb-ffz",id:w},t),a=l("div",{className:"panel-heading",innerText:D},n),o=l("div",{className:"tfb-ffz-container"},n);L("Overlapping emote names",h.overlappingHTML,o),L("Likely duplicates",h.likelyDuplicatesHTML,o),h.updateEmotes(await it())}async function ct(){let e=await E("#sidebar"),t=l("div",{className:"panel panel-default tfb-ffz",id:w},e),n=l("div",{className:"panel-heading",innerText:D},t),a=l("div",{className:"list-group"},t),o=Array.from(e.querySelectorAll(".panel")).find(i=>i.querySelector(".panel-heading")?.innerText.toLowerCase()==="Add to Channel".toLowerCase()),r=Array.from(o?.querySelectorAll(".list-group-item")??[]).map(i=>i.childNodes.item(0).wholeText.trim()),s=(await E("#emoticon")).childNodes.item(0).wholeText.trim();for(let i of r){let c=new $;await c.updateEmotes(i.toLowerCase());let m=l("div",{className:"list-group-item"},a);l("p",{className:"tfb-section-heading",innerText:i},m);let u=c.findExact(s??"");u.length>0&&(l("p",{className:"tfb-heading",innerText:"Would overlap with"},m),u.forEach(p=>{m.append(x(p))}));let f=c.findNotExact(s??"");f.length>0&&(l("p",{className:"tfb-heading",innerText:"Likely duplicates"},m),f.forEach(p=>{m.append(x(p))})),u.length+f.length===0&&l("p",{className:"tfb-info",innerText:`This emote doesn't overlap
with any in your library.`},m)}}function ee(){document.querySelector(`#${w}`)?.remove()}var ke=U(Se(),1);var ne=new Map,q=JSON.parse(localStorage.getItem("perceptualHashCache")??"{}"),Be=10;function Ie(e){if(e.id in q)return Promise.resolve(q[e.id]);if(!ne.has(e)){let t;if(e.provider==="BTTV")t=V(e.id);else if(e.provider==="FFZ")t=O(e.id,e.animated);else throw new Error("Invalid emote provider");let n=new Image;n.src=t,n.crossOrigin="anonymous",n.style.display="none",document.body.append(n),n.id=e.id;let a;ne.set(e,new Promise(o=>a=o)),n.onload=()=>{let o=document.createElement("canvas");o.height=o.width=112;let r=o.getContext("2d");if(!r)throw new Error("Unknown error while reading image data");r.drawImage(n,0,0);let s=r.getImageData(0,0,112,112),i=ke.default.bmvbhash(s,Be),c=parseInt(i,16).toString(2).padStart(Be**2,"0");a(c),q[e.id]=c,localStorage.setItem("perceptualHashCache",JSON.stringify(q))}}return ne.get(e)}function _e(){window.top&&(window.onmessage=e=>{window.top&&typeof e.data=="object"&&(e.data.type==="ping"?window.top.postMessage({type:"pong"},"https://"+H):e.data.type==="emote"&&Ie(e.data.emote).then(t=>{window.top?.postMessage({type:"phash",id:e.data.id,phash:t},"https://"+H)}))})}var re=document.createElement("link");re.rel="stylesheet";re.href="https://cdn.jsdelivr.net/gh/brilliantdrink/tools-for-bttv/tools-for-bttv.css";document.head.appendChild(re);function ut(){location.host===H?Le():location.host===C?_e():location.host===me&&Ce()}ut();})();
